<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Goal Tracker</title>
  <link rel="stylesheet" href="/toy_front/css/default.css">
  <style>
.add-tracker-page {
  padding: 16px;
  margin-bottom: 60px; /* 하단 네비게이션 공간 확보 */
}

.add-tracker-page h2 {
  font-size: 1.5rem;
  margin-bottom: 16px;
}

.form-item {
  display: flex;
  flex-direction: column;
  margin-bottom: 16px;
}

.form-item label {
  margin-bottom: 6px;
  font-weight: 500;
  color: #333;
}

.form-item input[type="text"],
.form-item input[type="number"],
.form-item input[type="file"],
.form-item input[type="button"]  {
  padding: 10px 12px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14px;
  outline: none;
  transition: all 0.2s;
}

.form-item input[type="text"]:focus,
.form-item input[type="number"]:focus {
  border-color: #ff7aa2;
  box-shadow: 0 0 5px rgba(255,122,162,0.3);
}

#add-tracker-btn {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 8px;
  background-color: #ff7aa2;
  color: #fff;
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.2s;
}

#add-tracker-btn:hover {
  background-color: #ff6090;
}

/* 모달 배경 */
.modal {
  display: none; 
  position: fixed; 
  z-index: 1000; 
  left: 0; top: 0; 
  width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.5); 
  justify-content: center; 
  align-items: center;
}

/* 모달 콘텐츠 */
.modal-content {
  background: #fff;
  padding: 16px;
  border-radius: 10px;
  width: 90%;
  max-width: 400px;
  max-height: 80%;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* 닫기 버튼 */
.close-btn {
  align-self: flex-end;
  cursor: pointer;
  font-size: 20px;
}

/* 이미지 그리드 */
.image-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

/* 이미지 아이템 */
.image-item {
  width: 100%;
  padding-top: 100%; /* 정사각형 유지 */
  position: relative;
  background: #f0f0f0;
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
}

.image-item img {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
}

/* 업로드 버튼 스타일 */
.upload-item {
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 12px;
  color: #555;
  background: #e0e0e0;
  font-weight: bold;
}
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.modal-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: #333;
}

.close-btn {
  cursor: pointer;
  font-size: 20px;
  color: #555;
}
  </style>
</head>
<body>

  <!-- 상단 메뉴 -->
  <header>
    <div class="header-left">Goal Tracker</div>
    <div class="header-right">
      <button id="add-btn">➕</button>
      <button id="settings-btn">⚙️</button>
    </div>
  </header>
  <div class="add-tracker-page page">
  <h2>새 달성표 추가</h2>

  <div class="form-item">
    <label for="tracker-name">달성표명</label>
    <input type="text" id="tracker-name" placeholder="예: 7일 달성표">
  </div>

  <div class="form-item">
    <label for="tracker-count">개수</label>
    <input type="number" id="tracker-count" placeholder="숫자만 입력">
  </div>

<div class="form-item">
  <label for="tracker-image-before">이미지 등록 (달성 후)</label>
    <!-- 이미지 등록 버튼 -->
    <input type="button" id="open-image-modal" value="이미지 선택">
</div>

<div class="form-item">
  <label for="tracker-image-after">이미지 등록 (달성 후)</label>
  <input type="file" id="tracker-image-after" accept="image/*">
</div>

  <button id="add-tracker-btn" href="/tracker_01.html">추가</button>
</div>

<!-- 이미지 모달 -->
<div id="image-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>이미지 선택</h3>
      <span class="close-btn">&times;</span>
    </div>
    <div class="image-grid">
      <div class="image-item upload-item">직접 업로드하기</div>
      <div class="image-item"><img src="image1.png" alt=""></div>
      <div class="image-item"><img src="image2.png" alt=""></div>
      <div class="image-item"><img src="image3.png" alt=""></div>
      <!-- 필요에 따라 더 추가 -->
    </div>
  </div>
</div>

  <!-- 하단 네비게이션 -->
  <nav class="bottom-nav">
    <button class="nav-item active">
      <span>🏠</span>
      <span class="label">홈</span>
    </button>
    <button class="nav-item">
      <span>📊</span>
      <span class="label">통계</span>
    </button>
    <button class="nav-item">
      <span>⚙️</span>
      <span class="label">설정</span>
    </button>
  </nav>

  <script>

// 바깥 클릭 시 닫기
document.addEventListener("click", (e) => {
  if (!e.target.closest(".list-item")) {
    document.querySelectorAll(".list-item").forEach(i => i.classList.remove("show"));
  }
});

const pages = {
  home: document.querySelector(".list"),
  settings: document.getElementById("settings-page")
};

const navButtons = document.querySelectorAll(".bottom-nav .nav-item");

navButtons.forEach((btn, index) => {
  btn.addEventListener("click", () => {
    // active 클래스 갱신
    navButtons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    // 페이지 전환
    Object.values(pages).forEach(p => p.style.display = "none");
    if (index === 2) { // 설정 메뉴
      pages.settings.style.display = "block";
    } else {
      pages.home.style.display = "block";
    }
  });
});

const modal = document.getElementById("image-modal");
const openBtn = document.getElementById("open-image-modal");
const closeBtn = document.querySelector(".close-btn");

openBtn.addEventListener("click", () => {
  modal.style.display = "flex";
});

closeBtn.addEventListener("click", () => {
  modal.style.display = "none";
});

// 모달 바깥 클릭 시 닫기
window.addEventListener("click", (e) => {
  if (e.target === modal) modal.style.display = "none";
});

// 직접 업로드 버튼 클릭
document.querySelector(".upload-item").addEventListener("click", () => {
  const fileInput = document.createElement("input");
  fileInput.type = "file";
  fileInput.accept = "image/*";
  fileInput.click();
  fileInput.addEventListener("change", (e) => {
    // 선택한 이미지 처리 로직 추가 가능
    console.log(e.target.files[0]);
  });
});

  </script>

</body>
</html>
