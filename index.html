<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Goal Tracker</title>
  <link rel="stylesheet" href="./css/default.css">
  <link rel="stylesheet" href="./js/common.js">
</head>
<body>

  <!-- ìƒë‹¨ ë©”ë‰´ -->
  <header>
    <div class="header-left">Goal Tracker</div>
    <div class="header-right">
      <button id="add-btn" onclick="location.href='/toy_front/add.html'">â•</button>
      <button id="settings-btn">âš™ï¸</button>
    </div>
  </header>
  <!-- í† ê¸€ ë²„íŠ¼ -->
  <div class="list-header">
    <label class="toggle-switch">
      <input type="checkbox" id="filter-toggle">
      <span class="slider"></span>
    </label>
    <span class="toggle-label">ì™„ë£Œë§Œ ë³´ê¸°</span>
  </div>
  <!-- ë‹¬ì„±í‘œ ëª©ë¡ -->
  <div class="list">
    <div class="list-item">
      <div class="thumbnail"></div>
      <div class="info">
        <div class="title">7ì¼ ë‹¬ì„±í‘œ</div>
        <div class="progress">
          <div class="progress-bar" style="width: 30%;"></div>
          <span class="progress-text">30/100</span>
        </div>
      </div>
      <button class="menu-btn">â‹®</button>
      <div class="dropdown">
        <button>í¸ì§‘</button>
        <button>ì‚­ì œ</button>
        <button>ê³µìœ </button>
      </div>
    </div>

    <div class="list-item">
      <div class="thumbnail" style="background-image:url('default-star.png');"></div>
      <div class="info">
        <div class="title">30ì¼ ë‹¬ì„±í‘œ</div>
        <div class="progress">
          <div class="progress-bar" style="width: 70%;"></div>
          <span class="progress-text">70/100</span>
        </div>
      </div>
      <button class="menu-btn">â‹®</button>
      <div class="dropdown">
        <button>í¸ì§‘</button>
        <button>ì‚­ì œ</button>
        <button>ê³µìœ </button>
      </div>
    </div>
  </div>

<!-- ì„¤ì • í˜ì´ì§€ -->
<div id="settings-page" class="page" style="display:none;">
  <header>
    <h1>ì„¤ì •</h1>
  </header>
  <div class="settings-list">
    <div class="setting-item">
      <label>
        <span>ì•Œë¦¼ ì¼œê¸°</span>
        <input type="checkbox" checked>
      </label>
    </div>
    <div class="setting-item">
      <label for="theme-select">í…Œë§ˆ ëª¨ë“œ</label>
      <select id="theme-select">
        <option value="light">ë¼ì´íŠ¸</option>
        <option value="dark">ë‹¤í¬</option>
      </select>
    </div>
    <div class="setting-item">
      <button id="reset-btn" class="btn">ëª¨ë“  ë‹¬ì„±í‘œ ì´ˆê¸°í™”</button>
    </div>
  </div>
</div>
  <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="bottom-nav">
    <button class="nav-item active">
      <span>ğŸ </span>
      <span class="label">í™ˆ</span>
    </button>
    <button class="nav-item">
      <span>ğŸ“Š</span>
      <span class="label">í†µê³„</span>
    </button>
    <button class="nav-item">
      <span>âš™ï¸</span>
      <span class="label">ì„¤ì •</span>
    </button>
  </nav>

  <script>
    document.querySelectorAll(".menu-btn").forEach(btn => {
  btn.addEventListener("click", (e) => {
    const item = e.target.closest(".list-item");
    const dropdown = item.querySelector(".dropdown");

    // ë‹¤ë¥¸ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
    document.querySelectorAll(".list-item").forEach(i => {
      if (i !== item) i.classList.remove("show");
    });

    // í˜„ì¬ í† ê¸€
    item.classList.toggle("show");

    if (item.classList.contains("show")) {
      // ìœ„ì¹˜ ê³„ì‚°
      const rect = dropdown.getBoundingClientRect();
      if (rect.bottom > window.innerHeight) {
        dropdown.style.top = "auto";
        dropdown.style.bottom = "100%"; // ìœ„ë¡œ ì—´ë¦¼
      } else {
        dropdown.style.top = "100%";
        dropdown.style.bottom = "auto"; // ì•„ë˜ë¡œ ì—´ë¦¼
      }
    }
  });
});

// ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
document.addEventListener("click", (e) => {
  if (!e.target.closest(".list-item")) {
    document.querySelectorAll(".list-item").forEach(i => i.classList.remove("show"));
  }
});

const pages = {
  home: document.querySelector(".list"),
  settings: document.getElementById("settings-page")
};

const navButtons = document.querySelectorAll(".bottom-nav .nav-item");

navButtons.forEach((btn, index) => {
  btn.addEventListener("click", () => {
    // active í´ë˜ìŠ¤ ê°±ì‹ 
    navButtons.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");

    // í˜ì´ì§€ ì „í™˜
    Object.values(pages).forEach(p => p.style.display = "none");
    if (index === 2) { // ì„¤ì • ë©”ë‰´
      pages.settings.style.display = "block";
    } else {
      pages.home.style.display = "block";
    }
  });
});

  </script>

</body>
</html>
